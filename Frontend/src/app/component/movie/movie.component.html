<div class="bg-black">
  <!-- Navbar -->
  <app-navbar></app-navbar>
  <!-- Movie Poster -->
  <section class="hero-section text-white text-center d-flex flex-column align-items-center justify-content-center" [style.background-image]="getSanitizedBackground()"></section>
  <!-- Movie Details -->
  <div class="container">
    <div class="row mt-3">
      <div class="col-lg-2">
        <!-- Container 1: Movie Poster -->
        <div class="container movie-card rounded">
          <img src="https://image.tmdb.org/t/p/w500/{{movie.image}}}" alt="Movie Poster" class="card-img-top movie-poster">
          <div class="movie-overlay">
            <mat-icon class="text-light">visibility</mat-icon>
            <mat-icon class="text-light">favorite_border</mat-icon>
            <mat-icon class="text-light">more_vert</mat-icon>
          </div>
        </div>
        <div class="d-flex mt-2">
          <div class="d-flex ms-3 mt-1"><mat-icon class="text-success">visibility</mat-icon><span
              class="ms-1 mt-1 text-white">20M</span></div>
          <div class="d-flex ms-2 mt-1"><mat-icon class="text-danger">favorite</mat-icon><span
              class="ms-1 mt-1 text-white">520K</span></div>
          <div class="d-flex ms-3 mt-1"><mat-icon class="text-info">comment</mat-icon><span
              class="ms-2 mt-1 text-white">100K</span></div>
        </div>
      </div>
      <div class="col-lg-7">
        <!-- Container 2: Movie Details -->
        <div class="container ms-3 mb-4">
          <div class="">
            <h1 class="text-white fw-bold">{{ movie.title }} <span class="text-muted">({{ movie.year }})</span></h1>
            <img src="../../../assets/images/users/user1.jpg" alt="user" class="rounded-circle" width="31" />
            <span class="ms-2 mt-2 fw-bold text-muted">{{ movieCredits.director }}</span>
          </div>
          <div class="d-flex mt-4">
            <p class=""><a class="text-success fs-5" href="#">Cast</a></p>
            <p class="ms-3"><a class="text-success fs-5" href="#">Crew</a></p>
            <p class="ms-3"><a class="text-success fs-5" href="#">Genre</a></p>
            <p class="ms-3"><a class="text-success fs-5" href="#">Details</a></p>
          </div>
          <div *ngFor="let cast of movieCredits.cast" class="d-flex" style="flex-wrap: wrap;">
            <div class="tag">{{ cast }}</div>
          </div>
          <div class="d-flex mt-3">
            <div class="">
              <button type="button" class="btn btn-success d-flex"><span><mat-icon> notes</mat-icon></span><span
                  class="ms-1" style="margin-top: 2px;"> Review</span></button>
            </div>
            <div class="">
              <button type="button"
                class="btn btn-warning ms-2 d-flex"><span><mat-icon>playlist_add</mat-icon></span><span class="ms-1"
                  style="margin-top: 2px;"> Add to List</span></button>
            </div>
            <div class="ms-2">
              <a class="btn btn-danger w-100 d-flex justify-content-center" (click)="open(content)"><span
                  class=""><mat-icon>play_circle_filled</mat-icon></span><span class="ms-1" style="margin-top: 2px;">
                  Trailer</span></a>
            </div>
          </div>
          <!-- Latest Reviews -->
          <div class="container mt-4">
            <div class="row">
              <h1 class="fw-bolder text-white">Recent Reviews</h1>
              <hr class="text-white">

              <div class="col-md-12 review">
                <div class="card mb-2 review">
                  <div class="card-body">
                    <div class="d-flex">
                      <img src="../../../assets/images/users/user5.jpg" height="15" width="39"
                        class="img-fluid rounded-circle" alt="User">
                      <p class="text-white ms-2 mt-2">vasili</p>
                    </div>
                    <p class="card-text mt-3 text-white">felix showing saltburn around as if he's in 73 questions with
                      vogue..</p>
                    <div class="d-flex">
                      <div class="d-flex"><mat-icon class="text-danger">favorite</mat-icon><span
                          class="ms-2 mt-1 text-white">5,201 likes</span></div>
                      <div class="d-flex ms-3 mt-1"><mat-icon class="text-info">comment</mat-icon><span
                          class="ms-2 text-white">20</span></div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <br>
            <div class="row">
              <div class="col-md-12 review">
                <div class="card mb-2 review">
                  <div class="card-body">
                    <div class="d-flex">
                      <img src="../../../assets/images/users/user4.jpg" height="15" width="39"
                        class="img-fluid rounded-circle" alt="User">
                      <p class="text-white ms-2 mt-2">vasili</p>
                    </div>
                    <p class="card-text mt-3 text-white">felix showing saltburn around as if he's in 73 questions with
                      vogue..</p>
                    <div class="d-flex">
                      <div class="d-flex"><mat-icon class="text-danger">favorite</mat-icon><span
                          class="ms-2 mt-1 text-white">5,201 likes</span></div>
                      <div class="d-flex ms-3 mt-1"><mat-icon class="text-info">comment</mat-icon><span
                          class="ms-2 text-white">20</span></div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <br>
            <div class="row">
              <div class="col-md-12 review">
                <div class="card mb-2 review">
                  <div class="card-body">
                    <div class="d-flex">
                      <img src="../../../assets/images/users/user1.jpg" height="15" width="39"
                        class="img-fluid rounded-circle" alt="User">
                      <p class="mt-2 text-white">vasili</p>
                    </div>
                    <p class="card-text mt-3 text-white">felix showing saltburn around as if he's in 73 questions with
                      vogue..</p>
                    <div class="d-flex">
                      <div class="d-flex"><mat-icon class="text-danger">favorite</mat-icon><span
                          class="ms-2 mt-1 text-white">5,201 likes</span></div>
                      <div class="d-flex ms-3 mt-1"><mat-icon class="text-info">comment</mat-icon><span
                          class="ms-2 text-white">20</span></div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <br>
            <div class="row">
              <div class="col-md-12 review">
                <div class="card mb-2 review">
                  <div class="card-body">
                    <div class="d-flex">
                      <img src="../../../assets/images/users/user2.jpg" height="15" width="39"
                        class="img-fluid rounded-circle" alt="User">
                      <p class="ms-2 mt-2 text-white">vasili</p>
                    </div>
                    <p class="card-text mt-3 text-white">felix showing saltburn around as if he's in 73 questions with
                      vogue..</p>
                    <div class="d-flex">
                      <div class="d-flex"><mat-icon class="text-danger">favorite</mat-icon><span
                          class="ms-2 mt-1 text-white">5,201 likes</span></div>
                      <div class="d-flex ms-3 mt-1"><mat-icon class="text-info">comment</mat-icon><span
                          class="ms-2 text-white">20</span></div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <br>
            <div class="row">
              <div class="col-md-12 review">
                <div class="card mb-2 review">
                  <div class="card-body">
                    <div class="d-flex">
                      <img src="../../../assets/images/users/user3.jpg" height="15" width="39"
                        class="img-fluid rounded-circle" alt="User">
                      <p class="ms-2 mt-2 text-white">vasili</p>
                    </div>
                    <p class="card-text mt-3 text-white">felix showing saltburn around as if he's in 73 questions with
                      vogue..</p>
                    <div class="d-flex">
                      <div class="d-flex"><mat-icon class="text-danger">favorite</mat-icon><span
                          class="ms-2 mt-1 text-white">5,201 likes</span></div>
                      <div class="d-flex ms-3 mt-1"><mat-icon class="text-info">comment</mat-icon><span
                          class="ms-2 text-white">20</span></div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="col-lg-3">
        <!-- Container 3: Icons -->
        <div class="container">
          <div class="row">
            <div class="col text-center p-1 item visible-icon" (click)="onIconClick('visibility')" [class.green-icon]="clickedIcon === 'visibility'">
              <mat-icon class="">visibility</mat-icon>
              <p class="text-center text-white">Watched</p>
            </div>
            <div class="col text-center p-1 ms-1 item love-icon" (click)="onIconClick('favorite')" [class.red-icon]="clickedIcon === 'favorite'">
              <mat-icon class="">favorite</mat-icon>
              <p class="text-center text-white">Like</p>
            </div>
            <div class="col text-center p-1 ms-1 item watch-icon" (click)="onIconClick('watch_later')" [class.blue-icon]="clickedIcon === 'watch_later'">
              <mat-icon class="">watch_later</mat-icon>
              <p class="text-center text-white">Watchlist</p>
            </div>
          </div>

          <div class="row mt-2">
            <div class="col text-center item p-1" (mouseleave)="resetStars()">
              <mat-icon class="star" [ngClass]="{'star-hover': hoverStar >= 1, 'star-selected': selectedStar >= 1}" (click)="rateMovie(1)">star</mat-icon>
              <mat-icon class="star" [ngClass]="{'star-hover': hoverStar >= 2, 'star-selected': selectedStar >= 2}" (click)="rateMovie(2)">star</mat-icon>
              <mat-icon class="star" [ngClass]="{'star-hover': hoverStar >= 3, 'star-selected': selectedStar >= 3}" (click)="rateMovie(3)">star</mat-icon>
              <mat-icon class="star" [ngClass]="{'star-hover': hoverStar >= 4, 'star-selected': selectedStar >= 4}" (click)="rateMovie(4)">star</mat-icon>
              <mat-icon class="star" [ngClass]="{'star-hover': hoverStar >= 5, 'star-selected': selectedStar >= 5}" (click)="rateMovie(5)">star</mat-icon>
            </div>
          </div>

          <h2 class="text-white text-center mt-3">Similar Movies</h2>
          <hr class="text-white">
          <div class="row">
            <!-- Loop through similarMovies array -->
            <div *ngFor="let movie of similarMovies" class="col-lg-2 col-md-4 card bg-black film-card">
              <div (click)="onMovieClick(movie.id)">
                <img [src]="movie.image" class="card-img-top film-poster rounded" alt="Movie {{ movie.title }}">
                <div class="film-overlay">
                  <mat-icon class="text-light">visibility</mat-icon>
                  <mat-icon class="text-light">favorite_border</mat-icon>
                  <mat-icon class="text-light">more_vert</mat-icon>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Trailer-Modal -->
  <ng-template #content let-modal>
    <div class="iframe-container">
      <iframe [src]="getSanitizedTrailer()" title="Trailer" allowfullscreen></iframe>
    </div>
  </ng-template>
  <pre>{{ closeResult }}</pre>

  <!-- Footer Section -->
  <hr class="text-muted">
  <app-footer></app-footer>
</div>
